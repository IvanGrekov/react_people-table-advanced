(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{23:function(e,t,a){e.exports=a(39)},28:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),o=a.n(r),c=a(3),s=a(1),i=(a(28),l.a.memo((function(){return l.a.createElement("nav",{className:"navigation"},l.a.createElement("ul",{className:"navigation__list"},l.a.createElement("li",{className:"navigation__item"},l.a.createElement(c.c,{to:"/",exact:!0,className:"navigation__link",activeClassName:"navigation__link--active"},"Home")),l.a.createElement("li",{className:"navigation__item"},l.a.createElement(c.c,{to:"/people",className:"navigation__link",activeClassName:"navigation__link--active"},"People"))))}))),m=(a(34),l.a.memo((function(){return l.a.createElement("h1",{className:"title"},"Home Page")}))),p=a(5),u=a(9),_=a.n(u);var d="https://mate-academy.github.io/react_people-table/api/people.json",b=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(d,t)}(d).then((function(e){return e.json()})).catch(console.log)},h=(a(35),function(e){var t=e.people,a=e.onAddPerson,r=t.filter((function(e){return"f"===e.sex})),o=t.filter((function(e){return"m"===e.sex})),s=Object(n.useState)(r),i=Object(p.a)(s,2),m=i[0],u=i[1],_=Object(n.useState)(o),d=Object(p.a)(_,2),b=d[0],h=d[1],f=Object(n.useState)(""),E=Object(p.a)(f,2),N=E[0],g=E[1],v=Object(n.useState)(!1),w=Object(p.a)(v,2),O=w[0],j=w[1],S=Object(n.useState)(""),C=Object(p.a)(S,2),y=C[0],x=C[1],k=Object(n.useState)(""),F=Object(p.a)(k,2),q=F[0],P=F[1],L=Object(n.useState)(""),A=Object(p.a)(L,2),B=A[0],J=A[1],R=Object(n.useState)(!1),I=Object(p.a)(R,2),M=I[0],D=I[1],H=Object(n.useState)(""),T=Object(p.a)(H,2),U=T[0],Y=T[1],z=Object(n.useState)(""),X=Object(p.a)(z,2),G=X[0],K=X[1],Q=function(e){return l.a.createElement("option",{key:e.slug,value:e.name},e.name)},V=function(){var e=N.toLowerCase().split(" ").join("-")+q,t={name:N,sex:y,born:+q,died:+B,motherName:U,fatherName:G,slug:e};g(""),j(!1),x(""),P(""),J(""),Y(""),K(""),a(t)};return l.a.createElement("div",{className:"new-person"},l.a.createElement("h2",{className:"new-person__title"},"Add a new person",l.a.createElement(c.b,{to:"/people",className:"new-person__form-closer",title:"Close form"},"X")),l.a.createElement("form",{className:"new-person__form",onSubmit:function(e){e.preventDefault(),V()}},l.a.createElement("div",{className:"new-person__form-item-wrapper"},l.a.createElement("label",{htmlFor:"name",className:"new-person__label"},"Name"),l.a.createElement("input",{id:"name",className:"new-person__input",type:"text",name:"name",placeholder:"Enter the name",required:!0,value:N,onChange:function(e){return function(e){var t=e.replace(/[^`a-z\u0430-\u044f\s]/gi,"");e.length!==t.length?j(!0):e.length===t.length&&O&&j(!1),g(t)}(e.target.value)}}),O&&l.a.createElement("span",{className:"new-person__validation"},"Only letters, spaces and ` are acceptable")),l.a.createElement("div",{className:" new-person__form-item-wrapper new-person__form-item-wrapper--radio "},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"male",className:"new-person__label"},"Male"),l.a.createElement("input",{id:"male",className:"new-person__input",type:"radio",name:"sex",value:"m",required:!0,checked:"m"===y,onChange:function(e){x(e.target.value),j(!1)}})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"female",className:"new-person__label"},"Female"),l.a.createElement("input",{id:"female",className:"new-person__input",type:"radio",name:"sex",value:"f",checked:"f"===y,onChange:function(e){x(e.target.value),j(!1)}}))),l.a.createElement("div",{className:"new-person__form-item-wrapper"},l.a.createElement("label",{htmlFor:"born",className:"new-person__label"},"Year of birth"),l.a.createElement("input",{id:"born",className:"new-person__input",type:"number",name:"born",placeholder:"Enter the year of birth",min:1400,required:!0,value:q,onChange:function(e){!function(e){if(+e>=1400){var t=r.filter((function(t){return+t.died>=+e})),a=o.filter((function(t){return+t.died>=+e}));u(t),h(a)}P(e)}(e.target.value),j(!1)}})),l.a.createElement("div",{className:"new-person__form-item-wrapper"},l.a.createElement("label",{htmlFor:"died",className:"new-person__label"},"Year of death"),l.a.createElement("input",{id:"died",className:"new-person__input",type:"number",name:"died",placeholder:"Enter the year of death",min:q,required:!0,disabled:!q,value:B,onChange:function(e){!function(e){var t=+e-+q;t>150?D(!0):t<=150&&M&&D(!1),J(e)}(e.target.value),j(!1)}}),M&&l.a.createElement("span",{className:"new-person__validation"},"Age mustn't be more than 150")),l.a.createElement("div",{className:"new-person__form-item-wrapper"},l.a.createElement("label",{htmlFor:"mother",className:"new-person__label"},"Mother"),l.a.createElement("select",{id:"mother",className:"new-person__input",name:"mother",required:!0,value:U,onChange:function(e){Y(e.target.value),j(!1)}},l.a.createElement("option",{value:"",disabled:!0},"Choose from existing people"),m.map(Q))),l.a.createElement("div",{className:"new-person__form-item-wrapper"},l.a.createElement("label",{htmlFor:"father",className:"new-person__label"},"Father"),l.a.createElement("select",{id:"father",className:"new-person__input",name:"father",required:!0,value:G,onChange:function(e){K(e.target.value),j(!1)}},l.a.createElement("option",{value:"",disabled:!0},"Choose from existing people"),b.map(Q))),l.a.createElement("button",{className:"new-person__submit",type:"submit",disabled:M},"Submit")))}),f=a(18),E=a(10),N=a(12),g=l.a.memo((function(e){var t=e.fatherName,a=e.fatherSlug,n=Object(s.h)().search;return t&&a?l.a.createElement(N.a,{to:"/people/".concat(a).concat(n,"#").concat(a),className:"people-section__table-link"},t):t?l.a.createElement("span",{className:"people-section__table-lost-father"},t):"unknown"}));g.defaultProps={fatherName:"",fatherSlug:""};var v=l.a.memo((function(e){var t=e.motherName,a=e.motherSlug,n=Object(s.h)().search;return t&&a?l.a.createElement(N.a,{to:"/people/".concat(a).concat(n,"#").concat(a),className:"people-section__table-link"},t):t?l.a.createElement("span",{className:"people-section__table-lost-mother"},t):"unknown"}));v.defaultProps={motherName:"",motherSlug:""};var w=a(4),O=a.n(w),j=(O.a.shape({name:O.a.string.isRequired,sex:O.a.string.isRequired,born:O.a.number.isRequired,died:O.a.number,fatherName:O.a.string,motherName:O.a.string,slug:O.a.string.isRequired,father:O.a.object,mother:O.a.object}),l.a.memo((function(e){var t=e.person,a=e.selectedSlug,n=e.isEven,r=t.name,o=t.sex,c=t.born,i=t.died,m=t.fatherName,p=t.motherName,u=t.slug,d=t.father,b=t.mother,h=d?d.slug:"",f=b?b.slug:"",E=Object(s.h)().search;return l.a.createElement("tr",{id:u,className:_()("people-section__table-row",{"people-section__table-row--even":n,"people-section__table-row--highlight--m":a===u&&"m"===o,"people-section__table-row--highlight--f":a===u&&"f"===o})},l.a.createElement("td",{className:"people-section__table-cell"},l.a.createElement(N.a,{to:"/people/".concat(u).concat(E,"#").concat(u),className:"people-section__table-link"},r)),l.a.createElement("td",{className:" people-section__table-cell people-section__table-cell--align "},o),l.a.createElement("td",{className:" people-section__table-cell people-section__table-cell--align "},c),l.a.createElement("td",{className:" people-section__table-cell people-section__table-cell--align "},i),l.a.createElement("td",{className:_()("people-section__table-cell",{"people-section__table-cell--error":!m})},l.a.createElement(g,{fatherName:m,fatherSlug:h})),l.a.createElement("td",{className:_()("people-section__table-cell",{"people-section__table-cell--error":!p})},l.a.createElement(v,{motherName:p,motherSlug:f})))}))),S=l.a.memo((function(e){var t,a=e.people,n=e.selectedSlug,r=Object(s.g)(),o=Object(s.h)(),c=new URLSearchParams(o.search),i=c.get("sortBy")||"",m=c.get("sortOrder")||"",p=function(e){if(c.set("sortBy",e),c.set("sortOrder","asc"),e===i)switch(m){case"asc":c.set("sortOrder","desc");break;case"desc":c.delete("sortBy"),c.delete("sortOrder");break;default:c.set("sortOrder","asc")}return r.push({search:"".concat(c.toString())})},u=(t=function(){switch(i){case"name":return"desc"===m?Object(E.a)(a).sort((function(e,t){return t.name.localeCompare(e.name)})):Object(E.a)(a).sort((function(e,t){return e.name.localeCompare(t.name)}));case"sex":return"desc"===m?Object(E.a)(a).sort((function(e,t){return t.sex.localeCompare(e.sex)})):Object(E.a)(a).sort((function(e,t){return e.sex.localeCompare(t.sex)}));case"born":return"desc"===m?Object(E.a)(a).sort((function(e,t){return t.born-e.born})):Object(E.a)(a).sort((function(e,t){return e.born-t.born}));case"died":return"desc"===m?Object(E.a)(a).sort((function(e,t){return t.died-e.died})):Object(E.a)(a).sort((function(e,t){return e.died-t.died}));default:return a}}(),Object(E.a)(t).map((function(e){var a=t.find((function(t){return t.name===e.fatherName})),n=t.find((function(t){return t.name===e.motherName}));return Object(f.a)(Object(f.a)({},e),{},{father:a,mother:n})})));return l.a.createElement("table",{className:"people-section__table"},l.a.createElement("thead",{className:"people-section__table-head"},l.a.createElement("tr",{className:"people-section__table-head-row"},l.a.createElement("th",{className:"people-section__table-subtitle",onClick:function(){return p("name")}},"Name",l.a.createElement("span",{className:_()("people-section__table-sort-icon",{"people-section__table-sort-icon--asc-sort":"name"===i&&"asc"===m,"people-section__table-sort-icon--desc-sort":"name"===i&&"desc"===m})})),l.a.createElement("th",{className:"people-section__table-subtitle",onClick:function(){return p("sex")}},"Sex",l.a.createElement("span",{className:_()("people-section__table-sort-icon",{"people-section__table-sort-icon--asc-sort":"sex"===i&&"asc"===m,"people-section__table-sort-icon--desc-sort":"sex"===i&&"desc"===m})})),l.a.createElement("th",{className:"people-section__table-subtitle",onClick:function(){return p("born")}},"Born",l.a.createElement("span",{className:_()("people-section__table-sort-icon",{"people-section__table-sort-icon--asc-sort":"born"===i&&"asc"===m,"people-section__table-sort-icon--desc-sort":"born"===i&&"desc"===m})})),l.a.createElement("th",{className:"people-section__table-subtitle",onClick:function(){return p("died")}},"Died",l.a.createElement("span",{className:_()("people-section__table-sort-icon",{"people-section__table-sort-icon--asc-sort":"died"===i&&"asc"===m,"people-section__table-sort-icon--desc-sort":"died"===i&&"desc"===m})})),l.a.createElement("th",{className:"people-section__table-subtitle"},"Father"),l.a.createElement("th",{className:"people-section__table-subtitle"},"Mother"))),l.a.createElement("tbody",{className:"people-section__table-body"},0!==u.length&&u.map((function(e,t){return l.a.createElement(j,{key:e.slug,person:e,selectedSlug:n||"not assigned",isEven:t%2===0})}))))}));S.defaultProps={people:[],selectedSlug:""};a(36);var C=JSON.parse(localStorage.getItem("people")),y=l.a.memo(Object(s.i)((function(e){var t=e.match,a=Object(s.g)(),r=Object(s.h)(),o=new URLSearchParams(r.search),i=o.get("query")||"",m=Object(n.useState)(C||[]),u=Object(p.a)(m,2),d=u[0],f=u[1],E=Object(n.useState)(i),N=Object(p.a)(E,2),g=N[0],v=N[1],w=Object(n.useState)(!1),O=Object(p.a)(w,2),j=O[0],y=O[1];Object(n.useEffect)((function(){0===d.length&&b().then((function(e){localStorage.setItem("people",JSON.stringify(e)),f(e)}))}),[]);var x=Object(n.useCallback)(function(e,t){var a;return function(){clearTimeout(a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];a=setTimeout.apply(void 0,[e,t].concat(l))}}((function(e,t){return t.set("query",e),""===e&&t.delete("query"),a.push({search:"".concat(t.toString())})}),500),[500]),k=d.filter((function(e){var t,a,n=i.toLowerCase();return e.name.toLowerCase().includes(n)||(null===(t=e.fatherName)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.motherName)||void 0===a?void 0:a.toLowerCase().includes(n))}));return l.a.createElement("section",{className:"people-section"},l.a.createElement("h2",{className:"people-section__title"},"People table"),l.a.createElement("div",{className:"people-section__add-person"},l.a.createElement(c.c,{to:"/people/newPerson",className:"people-section__add-person-button",activeClassName:"people-section__add-person-button--hidden"},"Add a new person"),null!==d&&l.a.createElement(s.b,{path:"/people/newPerson"},l.a.createElement(h,{people:d,onAddPerson:function(e){var t=JSON.parse(localStorage.getItem("people"));t.push(e),localStorage.setItem("people",JSON.stringify(t)),f(t)}}))),l.a.createElement("div",{className:"people-section__search"},l.a.createElement("label",{htmlFor:"search-field",className:"people-section__search-label"},l.a.createElement("h2",{className:"people-section__search-label-text"},"Find the person"),l.a.createElement("div",{className:_()("people-section__search-input-wrapper",{"people-section__search-input-wrapper--active":j})},l.a.createElement("input",{id:"search-field",className:"people-section__search-input",type:"text",placeholder:"Enter the name",value:g,onFocus:function(){y(!0)},onBlur:function(){y(!1)},onChange:function(e){v(e.target.value),x(e.target.value,o)}}),l.a.createElement("label",{htmlFor:"search-field",className:"people-section__search-icon"})))),l.a.createElement(S,{people:k,selectedSlug:t.params.slug}))}))),x=(a(37),l.a.memo((function(){return l.a.createElement("h1",{className:"not-found"},"Page not found")}))),k=(a(38),function(){return l.a.createElement("div",{className:"app"},l.a.createElement("header",null,l.a.createElement(i,null)),l.a.createElement("main",{className:"app__main"},l.a.createElement("div",{className:"app__content"},l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",exact:!0},l.a.createElement(m,null)),l.a.createElement(s.b,{path:"/people/:slug?"},l.a.createElement(y,null)),l.a.createElement(s.a,{path:"/home",to:"/"}),l.a.createElement(x,null)))))});o.a.render(l.a.createElement(c.a,null,l.a.createElement(k,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.5829efca.chunk.js.map